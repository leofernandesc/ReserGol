{% extends "base.html" %}

{% block title %}Editar Quadra - {{ quadra.nome }}{% endblock %}

{% block content %}
<h2 class="text-3xl font-bold mb-6">Editar Quadra</h2>

<form method="POST" class="space-y-6">
    <!-- Dados da quadra -->
    <div>
        <label class="block font-medium mb-1">Nome *</label>
        <input type="text" name="nome" value="{{ quadra.nome }}" required
               class="w-full px-3 py-2 border rounded">
    </div>

    <div>
        <label class="block font-medium mb-1">Tipo *</label>
        <select name="tipo" required class="w-full px-3 py-2 border rounded">
            <option value="futebol" {% if quadra.tipo=='futebol' %}selected{% endif %}>Futebol</option>
            <option value="futsal" {% if quadra.tipo=='futsal' %}selected{% endif %}>Futsal</option>
            <option value="society" {% if quadra.tipo=='society' %}selected{% endif %}>Society</option>
            <option value="tenis" {% if quadra.tipo=='tenis' %}selected{% endif %}>Tênis</option>
            <option value="basquete" {% if quadra.tipo=='basquete' %}selected{% endif %}>Basquete</option>
            <option value="volei" {% if quadra.tipo=='volei' %}selected{% endif %}>Vôlei</option>
            <option value="beach_tennis" {% if quadra.tipo=='beach_tennis' %}selected{% endif %}>Beach Tennis</option>
        </select>
    </div>

    <div>
        <label class="block font-medium mb-1">Endereço *</label>
        <input type="text" name="endereco" value="{{ quadra.endereco }}" required
               class="w-full px-3 py-2 border rounded">
    </div>

    <div>
        <label class="block font-medium mb-1">Preço por Hora *</label>
        <input type="number" name="preco_hora" step="0.01" value="{{ quadra.preco_hora }}" required
               class="w-full px-3 py-2 border rounded">
    </div>

    <div>
        <label class="block font-medium mb-1">Descrição</label>
        <textarea name="descricao" rows="4" class="w-full px-3 py-2 border rounded">{{ quadra.descricao }}</textarea>
    </div>

    <!-- Datas e horários -->
    <h3 class="text-2xl font-bold mt-6 mb-2">Próximos 7 dias</h3>

    {% for data in datas %}
        <div class="mb-4 p-3 border rounded">
            <strong>{{ data.data.strftime('%d/%m/%Y') }}</strong>

            <!-- Excluir data -->
            {% if data.id %}
                <label class="inline-flex items-center ml-2">
                    <input type="checkbox" name="datas_excluir" value="{{ data.id }}" class="mr-1">
                    Excluir data
                </label>
            {% endif %}

            <!-- Horários -->
            <div class="mt-2 flex flex-wrap gap-2">
                {% for h in horarios[data.data] %}
                    <label class="inline-flex items-center">
                        {% if h.id %}
                            <input type="checkbox" name="horarios_excluir" value="{{ h.id }}" class="mr-1">
                        {% else %}
                            <input type="checkbox" disabled class="mr-1">
                        {% endif %}
                        {{ h.horario }}
                    </label>
                {% endfor %}
            </div>
        </div>
    {% endfor %}

    <button type="submit" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded">Salvar Alterações</button>
</form>

{% endblock %}