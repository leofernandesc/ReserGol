{% extends "base.html" %}

{% block title %}Editar Usu√°rio - Admin{% endblock %}

{% block content %}
    <div class="mb-6">
        <a href="{{ url_for('admin_usuarios') }}" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium">
            <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Voltar para Gerenciar Usu√°rios
        </a>
    </div>

    <h2 class="text-3xl font-bold text-gray-800 mb-6">Editar Usu√°rio</h2>
    
    <form method="POST" class="space-y-6">
        <div>
            <label for="nome" class="block text-sm font-medium text-gray-700 mb-2">Nome Completo *</label>
            <input type="text" id="nome" name="nome" value="{{ usuario.nome }}" required
                   class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        </div>
        
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
            <input type="email" id="email" name="email" value="{{ usuario.email }}" required
                   class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        </div>
        
        <div>
            <label for="role" class="block text-sm font-medium text-gray-700 mb-2">Tipo de Usu√°rio</label>
            <select id="role" name="role" 
                    {% if usuario.id == current_user.id %}disabled{% endif %}
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="usuario" {% if usuario.role == 'usuario' %}selected{% endif %}>üë§ Usu√°rio Comum</option>
                <option value="dono_quadra" {% if usuario.role == 'dono_quadra' %}selected{% endif %}>‚öΩ Dono de Quadra</option>
                <option value="admin" {% if usuario.role == 'admin' %}selected{% endif %}>üëë Administrador</option>
            </select>
            {% if usuario.id == current_user.id %}
                <p class="mt-2 text-xs text-gray-500">Voc√™ n√£o pode alterar seu pr√≥prio tipo de usu√°rio.</p>
            {% endif %}
        </div>
        
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p class="text-sm font-medium text-blue-800 mb-2">‚ÑπÔ∏è Informa√ß√µes Adicionais</p>
            <div class="space-y-1 text-sm text-blue-700">
                <p><strong>ID do Usu√°rio:</strong> {{ usuario.id }}</p>
                <p><strong>Tentativas de Login:</strong> {{ usuario.tentativas_login }}</p>
                <p>
                    <strong>Status:</strong> 
                    {% if usuario.esta_bloqueado() %}
                        <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-medium ml-1">Bloqueado</span>
                    {% else %}
                        <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium ml-1">Ativo</span>
                    {% endif %}
                </p>
            </div>
        </div>
        
        <div class="flex gap-3 pt-4">
            <button type="submit"
                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition duration-200">
                Salvar Altera√ß√µes
            </button>
            <a href="{{ url_for('admin_usuarios') }}"
               class="flex-1 text-center bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-lg transition duration-200">
                Cancelar
            </a>
        </div>
    </form>
{% endblock %}
